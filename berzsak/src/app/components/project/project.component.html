<div class="container" [class.sidebar-open]="selectedProject">

  <!-- brand name -->
  <div class="brand-name">
    <button class="brand-name-button" (click)="showContact()">BERZSAK.</button>
  </div>

  <!-- Grid/Experience button -->
  <div class="view-button" [hidden]="selectedProject">
    <button class="view-btn" (click)="viewChange()">
    <span class="view-icon">
      <!-- use a grid/list icon based on status -->
      <i *ngIf="view.value === 'Grid view'" class="fa fa-grip"></i>
      <i *ngIf="view.value === 'Experience view'" class="fa fa-arrows"></i>
    </span>
      <span class="view-text">{{ view.value }}</span>
    </button>
  </div>

  <!-- Sidebar -->
  <div class="sidebar" *ngIf="selectedProject && !sidebarDisabled" [@sidebarSlide] (@sidebarSlide.done)="onSidebarAnimDone($event)">
    <h2 class="sidebar-name">{{ selectedProject.name }}</h2>
    <h3 class="sidebar-description">{{ selectedProject.description }}</h3>

    <div class="sidebar-main">
      <img [src]="selectedProject.mainImgUrl[3]" [alt]="selectedProject.name"
           [srcset]="getSrcset(selectedProject.mainImgUrl)"
           sizes="34vw"
           [attr.data-project-name]="selectedProject.name">
    </div>

    <div class="gallery">
      <img *ngFor="let imgVariants of selectedProject.imageUrls"
           [src]="imgVariants[3]"
           [srcset]="getSrcset(imgVariants)"
           sizes="{{ getGallerySizes(selectedProject.imageUrls.length) }}"
           [alt]="selectedProject.name">
    </div>
    <a [routerLink]="['/main', selectedProject.slug]">Take me to project</a>
  </div>
  <button *ngIf="selectedProject" class="close-btn" (click)="closeSidebar()">âœ•</button>


  <!-- Grid-Experience -->
  <div *ngIf="view.status === ViewStatus.EXPERIENCE" class="grid-experience" #gridExp [@gridSlide]="gridState" (@gridSlide.done)="onGridAnimDone($event)"
       (mousedown)="handleExperienceInteraction($event)"
       (mousemove)="onExperienceDrag($event)"
       (pointerdown)="handleExperienceInteraction($event)"
       (pointermove)="onExperienceDrag($event)"
       (touchstart)="handleExperienceInteraction($event)"
        (touchmove)="onExperienceDrag($event)">
    <div *ngFor="let project of projects" class="grid-item">
      <img [src]="project.mainImgUrl[3]"
           [srcset]="getSrcset(project.mainImgUrl)"
           [sizes]="gridImageSizes()"
           [alt]="project.name"
           [attr.data-project-name]="project.name"
           (click)="onImageClick($event, project)" draggable="false">
    </div>
  </div>

  <!-- Grid-Col3 -->
  <div class="grid-container" *ngIf="view.status === ViewStatus.GRID">
    <div class="fade-div"></div>
    <div class="grid-col3" #gridCol3>
      <div *ngFor="let project of projects" class="grid-item">
        <div class="item-gallery"
             (mousedown)="handleCol3Interaction($event)"
             (mousemove)="onCol3Drag($event)"
             (pointerdown)="handleCol3Interaction($event)"
             (pointermove)="onCol3Drag($event)"
             (touchstart)="handleCol3Interaction($event)"
             (touchmove)="onCol3Drag($event)">
          <img *ngFor="let imgVariants of project.imageUrls"
               [src]="imgVariants[3]"
               [srcset]="getSrcset(imgVariants)"
               sizes="(max-width: 400px) 90vw, (max-width: 700px) 40vw, 28vw"
               [alt]="project.name"
               draggable="false">
        </div>
      </div>
    </div>
  </div>

</div>
